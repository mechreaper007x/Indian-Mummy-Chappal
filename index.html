<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Indian Mummy: Chappal</title>

    <!-- Physics Engine -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Bangers&family=Open+Sans:wght@600;800&display=swap"
      rel="stylesheet"
    />

    <!-- Game Styles -->
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Orientation Lock Overlay -->
    <div id="orientation-lock" class="screen hidden" style="z-index: 10000; background: #FFF3E0; flex-direction: column;">
        <div style="font-size: 60px; animation: spin 2s infinite linear;">üîÑ</div>
        <h2 class="title-font text-3xl text-orange-800 mt-4 text-center">PLEASE ROTATE<br>DEVICE</h2>
        <p class="text-orange-900 mt-2 text-center" style="font-family: 'Open Sans', sans-serif;">This game is best experienced in<br>Landscape Mode!</p>
        <style>@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style>
    </div>

    <div id="game-container">
    <!-- ========================================
     START SCREEN
======================================== -->
    <div id="start-screen" class="screen">
      <h1 class="main-title title-font">INDIAN MUMMY:<br />CHAPPAL</h1>
      <div class="creator-tag">CREATED BY MISHMAY</div>
      <button class="btn" onclick="sounds.init(); sounds.playClick(); game.showMummySelect()">PLAY</button>
      <button class="btn btn-small mt-4" onclick="sounds.init(); sounds.playClick(); game.toggleFullscreen()" id="start-fullscreen-btn" style="background: #607D8B;">‚äû FULLSCREEN</button>
    </div>

    <!-- ========================================
     LEVEL SELECT
======================================== -->
    <div id="level-screen" class="screen hidden">
      <h2 class="text-3xl font-bold text-orange-800 mb-6 title-font">
        SELECT SCENARIO
      </h2>
      <div class="level-grid" id="level-grid">
        <!-- Generated by JS -->
      </div>
      <button class="btn btn-small mt-8" onclick="game.showMummySelect()">
        BACK
      </button>
    </div>

    <!-- ========================================
     MUMMY SELECTION SCREEN
======================================== -->
    <div id="mummy-screen" class="screen hidden">
      <h2 class="text-3xl font-bold text-orange-800 mb-4 title-font">
        SELECT YOUR MUMMY
      </h2>
      <p class="text-orange-700 mb-4" style="font-size: 14px;">
        Choose a regional mummy from across India!
      </p>
      <div class="mummy-grid" id="mummy-grid">
        <!-- Generated by JS -->
      </div>
      <button class="btn btn-small mt-6" onclick="game.showChappalSelect()">
        NEXT: CHOOSE CHAPPAL ‚Üí
      </button>
      <button class="btn btn-small mt-2" style="background: #757575;" onclick="game.showStartScreen()">
        BACK
      </button>
    </div>

    <!-- ========================================
     CHAPPAL SELECTION SCREEN
======================================== -->
    <div id="chappal-screen" class="screen hidden">
      <h2 class="text-3xl font-bold text-orange-800 mb-4 title-font">
        CHOOSE YOUR WEAPON ü©¥
      </h2>
      <p class="text-orange-700 mb-4" style="font-size: 14px;">
        Each chappal has unique properties!
      </p>
      <div class="chappal-grid" id="chappal-grid">
        <!-- Generated by JS -->
      </div>
      <button class="btn btn-small mt-6" onclick="game.showLevelSelect()">
        NEXT: SELECT LEVEL ‚Üí
      </button>
      <button class="btn btn-small mt-2" style="background: #757575;" onclick="game.showMummySelect()">
        BACK
      </button>
    </div>

    <!-- ========================================
     PAUSE SCREEN
======================================== -->
    <div
      id="pause-screen"
      class="screen hidden"
      style="background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(5px)"
    >
      <div class="modal-content">
        <h2 class="text-4xl title-font text-red-600 mb-4">PAUSED</h2>
        <div class="flex flex-col gap-4">
          <button class="btn" onclick="game.togglePause()">RESUME</button>
          <button
            class="btn"
            style="background: #ff9800"
            onclick="game.showLevelSelect()"
          >
            EXIT TO MENU
          </button>
        </div>
      </div>
    </div>

    <!-- ========================================
     COMIC STORY SCREEN
======================================== -->
    <div id="comic-screen" class="screen hidden">
      <div class="comic-container">
        <div class="comic-panel" id="comic-panel">
          <div class="comic-title" id="comic-story-title">STORY TITLE</div>
          <div class="panel-counter" id="panel-counter">1/3</div>
          <div class="narration-box" id="comic-narration">Narration text...</div>
          <div class="comic-scene" id="comic-scene">
            <!-- Characters drawn via canvas -->
            <canvas id="comic-canvas" width="500" height="200"></canvas>
          </div>
          <div class="speech-bubble" id="comic-dialogue">
            "Dialogue text here..."
          </div>
        </div>
        <div class="comic-controls">
          <button class="btn btn-small" onclick="game.skipComic()" style="background: #757575;">SKIP ‚è≠</button>
          <button class="btn" onclick="game.advancePanel()" id="comic-next-btn">NEXT ‚ñ∂</button>
        </div>
      </div>
    </div>

    <!-- ========================================
     GAME HUD
======================================== -->

    <div id="ui-layer" class="hidden">
      <div class="flex justify-between items-start w-full pointer-events-auto">
        <div>
          <div class="level-title title-font" id="level-name-display">
            LEVEL 1
          </div>
          <div
            class="font-bold text-orange-800 bg-white\/70 px-3 py-1 rounded inline-block mt-2 border border-orange-800"
          >
            AMMO: <span id="ammo-count">6</span>
          </div>
        </div>
        <div class="flex gap-2">
          <button class="btn btn-small" onclick="sounds.playClick(); game.resetLevel();" title="Restart">üîÑ</button>
          <button class="btn btn-small" onclick="game.toggleFullscreen()" id="fullscreen-btn" title="Fullscreen">‚äû</button>
          <button class="btn btn-small" onclick="game.togglePause()">‚è∏</button>
        </div>
      </div>

      <div id="status-display" class="status-text">RELOADING...</div>

      <div
        class="text-center w-full pointer-events-none pb-8 text-orange-900 title-font"
        style="opacity: 0.6; font-size: max(2vw, 18px)"
      >
        DRAG & RELEASE TO THROW!
      </div>
    </div>

    <!-- ========================================
     ANIMATED WIN/LOSE MODAL
======================================== -->
    <div id="game-modal" class="screen hidden">
      <!-- Confetti Canvas for Win Celebration -->
      <canvas id="confetti-canvas"></canvas>
      
      <!-- Modal Box with Dynamic Theme -->
      <div class="modal-content" id="modal-box">
        <!-- Animated Icon -->
        <div class="modal-icon" id="modal-icon">üèÜ</div>
        
        <!-- Title with Animation -->
        <h2 class="modal-title-text title-font" id="modal-title">CLEARED!</h2>
        
        <!-- Star Rating (Win only) -->
        <div class="modal-stars" id="modal-stars"></div>
        
        <!-- Description -->
        <p class="modal-desc-text" id="modal-desc">Description</p>
        
        <!-- Action Button -->
        <button class="btn modal-btn" id="modal-btn" onclick="game.handleModalAction()">
          ACTION
        </button>
      </div>
    </div>

    <!-- Game Canvas -->
    <canvas id="world"></canvas>
    </div><!-- End game-container -->

    <!-- Kid Launch Effect -->
    <script src="kid_launch.js"></script>

    <!-- Game Script -->
    <script src="game.js"></script>
    
    <!-- Additional Levels Data (extends base arrays) -->
    <script src="levels_data.js"></script>
  </body>
</html>
